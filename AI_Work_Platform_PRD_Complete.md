# AI Work Platform - 产品需求说明书 (PRD)

**版本**：v1.0
**创建日期**：2026-02-15
**状态**：待评审

---

## 📋 文档说明

本文档基于用户通过苏格拉底提问法确认的需求整理而成，涵盖产品定位、功能需求、用户体验流程、技术要求等内容。

---

## 1. 产品概述

### 1.1 产品定位

**AI Work Platform** 是面向"一人公司/超级个体"的通用智能体协作工具，帮助独立工作者通过多个 AI Agent 协同完成复杂业务流程。

**核心理念**：
- 模拟企业招聘流程，让用户自然地"雇佣"AI 员工
- 自然语言描述工作流，无需理解技术细节
- 开箱即用，零技术门槛

### 1.2 目标用户

**主要用户**：
- 一人公司创始人
- 超级个体（独立创作者、自媒体运营等）
- 需要多任务协作的独立工作者

**用户特征**：
- 有明确的业务需求，不是"躺平的闲鱼"
- 不懂技术，但愿意学习使用工具提升效率
- 追求专业分工，希望每个 AI Agent 专注一个领域

**非目标用户**：
- 技术极客（已有 OpenClaw 等工具）
- 想躺平的闲鱼
- 只需要一个全能 AI 助手的用户

### 1.3 使用场景

**典型场景**：内容创作

- 漫剧制作：从故事创意到视频成片的完整流程
- 短视频制作：脚本、拍摄、剪辑、发布
- Podcast 制作：选题、脚本、录音、后期
- 直播运营：策划、内容、互动、数据

**扩展场景**：其他行业的复杂业务流程（通过工作流引擎支持）

---

## 2. 核心功能需求

### 2.1 用户首次设置（老板入职）

**功能描述**：用户第一次打开软件时，模拟"开新公司"的场景，引导用户完成个人资料设置。

**核心要素**：

1. **引导话术**：
   - 恭喜用户"开设新公司"
   - 引导用户填写"老板资料"
   - 营造"宾至如归"的体验

2. **信息收集**：
   - 行业选择（漫剧、短视频、Podcast、直播等）
   - 几句话描述想做什么（自由文本输入）
   - 工作风格偏好（简洁/详细/幽默等）

3. **智能推荐**：
   - 根据用户选择的行业和描述，推荐一个团队配置
   - 推荐内容包含：Agent 列表、每个 Agent 的职位和职责

**输出**：
- 用户个人资料
- 推荐的团队配置

---

### 2.2 Agent 模拟招聘系统

**功能描述**：用户通过发布职位描述，系统自动生成完整的 Agent 配置。

#### 2.2.1 职位发布

**输入内容**：
- 职位名称（如：漫剧脚本师、漫剧分镜师）
- 工作内容描述（自由文本）
- 技能要求（自由文本）
- 工作风格（如：创意丰富、专业严谨）
- 输出要求（如：每集 10 分钟）

#### 2.2.2 Agent 自动生成

**生成内容**（7 项必须）：

1. **灵魂（SOUL.md）**
   - 性格特征
   - 价值观
   - 行为准则（**需要手动调整**）

2. **头像**
   - 根据职位和风格自动生成
   - 从预设库选择

3. **身份信息（IDENTITY.md）**
   - 姓名
   - 职位
   - 简介

4. **行为准则（RULES.md）**
   - 工作边界
   - 安全规则
   - 行为准则（**需要手动调整**）

5. **记忆系统（MEMORY.md）**
   - 初始为空
   - 预留框架

6. **推荐技能列表（SKILLS.md）**
   - 系统根据职位推荐相关技能
   - 推荐准确率要求：60-70%
   - 用户需要手动筛选（**需要手动调整**）

7. **默认模型（CONFIG.json）**
   - 根据职位推荐最适合的 LLM

#### 2.2.3 规则生成机制

**生成方式**：
- 不使用预置模板
- AI 根据职位描述 + 联网搜索动态生成

**搜索信息范围**（多维度）：
- 岗位职责和工作流程
- 行业规范和职业操守
- 该职位常见的性格特质
- 该领域的专业知识

**搜索工具**：
- 使用 Model 自带的联网功能
- 或网络搜索 MCP

**质量要求**：
- 基本可用，用户微调即可
- 不要过度优化细节，用户不一定专业

#### 2.2.4 手动调整

生成后用户可以自由修改：
- ✅ 规则（RULES.md）
- ✅ 技能列表（SKILLS.md）
- ✅ 其他所有内容

**调整起点**：
- 规则：AI 动态生成（行业通用 + 职位个性化）
- 技能：系统推荐列表，用户筛选

---

### 2.3 技能/插件系统

**功能描述**：系统内置官方技能（不允许修改），用户也可以通过自然语言创建符合系统规范的自定义技能。

#### 2.3.1 官方技能（漫剧制作场景 - 12 个必须）

**完整流程**：
1. 想法 → 2. 故事创意 → 3. 剧情大纲 → 4. 角色设定 → 5. 分镜脚本 → 6. 分镜参考图 → 7. 配音 → 8. 背景音乐 → 9. 音效 → 10. 视频合成 → 11. 字幕 → 12. 成片

**对应官方技能**：

| 技能编号 | 技能名称 | 功能描述 | 依赖工具 |
|---------|---------|---------|---------|
| 1 | **故事创意生成** | 根据用户想法生成完整故事创意 | 无 |
| 2 | **剧情大纲生成** | 将故事创意结构化为剧情大纲 | 无 |
| 3 | **角色设定生成** | 生成角色的外貌、性格、背景设定 | 无 |
| 4 | **分镜脚本生成** | 将剧情大纲转化为详细的分镜脚本 | 无 |
| 5 | **分镜参考图生成** | 根据分镜脚本生成场景参考图 | 图片生成 API |
| 6 | **角色配音合成** | 根据角色设定和对话生成配音 | TTS API |
| 7 | **背景音乐推荐** | 根据场景情绪推荐合适的背景音乐 | 音乐库 API |
| 8 | **音效匹配** | 为场景匹配合适的音效 | 音效库 API |
| 9 | **视频合成** | 将图片+配音+音效+BGM 合成视频 | 视频合成 API |
| 10 | **字幕生成** | 根据对话生成字幕 | 无 |
| 11 | **视频后期处理** | 基础剪辑、调色、转场 | 视频编辑 API |
| 12 | **成片导出** | 导出最终视频 | 无 |

**技能特性**：
- 官方技能不允许用户修改（只读）
- 技能文件封装在系统内部，用户不可见
- 技能执行时可能产生成本（调用外部 API）

#### 2.3.2 外部工具配置

**配置方式**：
- 系统预置固定的 Provider 和 Model
- 用户可以打开自定义选项配置自己的付费接口
- Provider 的 API 使用信息由开发者定义并封装，不让用户看见

**配置级别**：
- 开箱即用：系统内置默认配置
- 可自定义：用户可以配置自己的 API Key

**成本处理**：
- 登录后有限额度
- 后期付费订阅（MVP 版本先不考虑）

#### 2.3.3 自定义技能创建

**创建方式**：
- 用户通过自然语言描述技能需求
- 系统自动生成 SKILL.md

**输入示例**：
```
我需要一个技能，可以根据文本描述生成合适的背景音乐推荐，
考虑场景的情绪、节奏、风格等因素。
```

**系统输出**：
- SKILL.md（技能描述、输入输出、工具依赖、使用流程）
- 自动识别需要的工具
- 生成使用示例和测试用例

---

### 2.4 Flow 工作流编排

**功能描述**：用户通过自然语言描述工作流，系统自动解析并生成结构化 Flow。

#### 2.4.1 工作流创建

**输入方式**：
- 自然语言描述工作流程

**输入示例**（漫剧制作）：
```
项目管理能统筹全局，然后是根据文字内容进行分镜，
再进行分镜视频合成，最后进行配音和背景音乐合成
```

**解析要求**：
- 第一次创建工作流时，系统只需要理解用户的基本意图
- 模糊匹配即可，细节通过多次交流细化或用户手动调整
- 职位名称模糊匹配（如"编剧"和"脚本师"等同）
- 重点识别任务依赖关系（准确）

**准确识别示例**：
```
输入："脚本师生成大纲，然后画面师生成图片"
输出：脚本师 → 大纲 → 画面师 → 图片（依赖关系正确）
```

#### 2.4.2 流程依赖关系（漫剧制作）

**固定流程**：
```
1. 项目管理（统筹全局）
   ↓
2. 分镜制作（根据文字内容）
   ↓
3. 分镜视频合成
   ↓
4. 配音合成
   ↓
5. 背景音乐合成
```

**依赖规则**：
- 线性流程，无并行任务
- 配音和背景音乐合成：先配音再背景音乐

#### 2.4.3 Flow 生成质量

**期望水平**：
- 第一次生成：抓住基本骨架，细节可手动调整
- 任务依赖关系：准确识别
- Agent 匹配：职位名称模糊匹配即可

---

### 2.5 新手引导功能

**功能描述**：用户首次完成老板设置后，系统引导用户实际运行一个简单任务，快速体验系统能力。

#### 2.5.1 引导流程

**步骤 1**：展示推荐团队
- 展示推荐的 Agent 列表
- 显示每个 Agent 的职位和职责
- 用户至少需要"看一遍"才能确认

**步骤 2**：引导用户运行简单任务
- 提供一个"简单任务"选项
- 任务范围适中，既能展示完整能力，又不会太耗时

**步骤 3**：执行任务
- 用户确认后，系统执行任务
- 实时显示执行进度

**步骤 4**：展示结果
- 展示任务执行结果
- 引导用户查看详情

#### 2.5.2 简单任务定义

**任务内容**：
- 只生成 1 个分镜（包含相关文案和图片）
- 配音合成
- 生成视频

**任务特点**：
- 展示完整能力（文案、图片、配音、视频）
- 执行时间短（1-2 分钟）
- 结果可视化，用户能直观看到效果

---

### 2.6 多 Provider/Model 管理

**功能描述**：支持多个 LLM Provider，每个 Provider 下有多个 Model，默认开箱即用。

#### 2.6.1 默认配置

**内置 Provider**（示例）：
- OpenAI（gpt-4o、gpt-4o-mini）
- Anthropic（claude-3-5-sonnet）
- 智谱 AI（glm-4）
- 阿里云（qwen-max）

**配置级别**：
- 默认 Provider 和 Model 预置好
- 用户可以直接使用
- 用户也可以自定义配置

#### 2.6.2 用户配置界面

**功能**：
- 显示所有 Provider 和 Model
- 启用/禁用 Provider 和 Model
- 配置 API Key（加密存储）
- 选择默认 Model
- 测试连接

**配置方式**：
- 简单模式：使用默认配置
- 高级模式：自定义配置

---

### 2.7 工具调用完整系统

**功能描述**：提供完整的工具调用能力，支持文件操作、命令执行、Web 搜索等，让 Agent 能够执行实际任务。

#### 2.7.1 基础工具

**文件操作工具**：
- **read**：读取文件内容
- **write**：创建或覆盖文件
- **edit**：精确编辑文件（查找替换）

**命令执行工具**：
- **exec**：执行 Shell 命令
  - 支持后台运行
  - 支持 PTY 模式（交互式命令）
  - 支持超时控制
  - 支持工作目录指定

**Web 搜索工具**：
- **web_search**：使用 Brave Search API 进行网络搜索
  - 支持地区筛选（如中国、美国）
  - 支持语言筛选
  - 支持时间范围筛选
  - 返回标题、URL、摘要

- **web_fetch**：提取网页内容
  - 自动提取可读内容
  - 支持 markdown 或文本格式
  - 支持字符数限制

#### 2.7.2 技能工具

**图片生成工具**：
- **image_generate**：内置图片生成脚本
  - 根据文本描述生成图片
  - 支持多种风格和参数

**视频生成工具**：
- **video_generate**：内置视频生成脚本
  - 根据脚本和图片生成视频
  - 支持首帧图片（URL 或本地路径）

**语音合成工具**：
- **tts**：文本转语音
  - 支持多种语音风格
  - 根据通道选择输出格式

**浏览器控制工具**：
- **browser**：自动化浏览器操作
  - 截图、导航、点击、输入等
  - 支持多种配置（Chrome 扩展、独立浏览器）

#### 2.7.3 安全机制

**默认限制**：
- 所有操作限制在工作空间内
- 禁止访问敏感路径（~/.ssh/、~/.gnupg/、~/.aws/ 等）
- 禁止访问包含关键词（*key*、*secret*、*password*、*token*）的文件

**危险命令屏蔽**：
- 自动识别并阻止危险命令（如 rm -rf /）
- 敏感操作需要用户确认

**输出规范**：
- 禁止在聊天、日志、代码中输出真实密钥
- 禁止引入隐蔽的外泄机制（隐藏网络调用、自动上传）

#### 2.7.4 工具调用流程

```
用户请求 → Agent 分析 → 选择工具 → 执行工具 → 返回结果
                                    ↓
                           安全检查 → 用户确认（如果需要）
```

**示例场景**：
```
用户："帮我搜索最新的 AI 行业新闻"

Agent:
1. 使用 web_search 工具
2. 搜索关键词："AI 行业新闻 2026"
3. 获取结果并整理
4. 返回给用户
```

---

### 2.8 定时任务系统

**功能描述**：提供强大的定时任务能力，支持周期性检查、一次性提醒、复杂调度等多种场景。

#### 2.8.1 HEARTBEAT.md 机制

**功能描述**：通过 HEARTBEAT.md 文件配置周期性任务，系统定期检查并执行。

**使用场景**：
- 周期性检查（邮件、日历、通知等）
- 用户自定义任务清单
- 智能心跳（避免重复打扰）

**HEARTBEAT.md 配置示例**：

```markdown
# HEARTBEAT.md

## 每日检查（每天 9:00）
- 检查是否有重要邮件
- 检查今日日历事件
- 检查天气

## 每 2 小时
- 检查是否有新的社交通知

## 每周（周一 9:00）
- 整理本周工作总结
- 检查待办事项
```

**智能心跳策略**：
- 避免在深夜（23:00-08:00）打扰，除非紧急
- 同一类型检查合并执行，减少 API 调用
- 跟踪上次检查时间，避免重复

#### 2.8.2 Cron 表达式支持

**支持三种调度类型**：

**1. 一次性任务（at）**
```json
{
  "schedule": {
    "kind": "at",
    "at": "2026-02-20T14:30:00+08:00"
  }
}
```

**2. 周期任务（every）**
```json
{
  "schedule": {
    "kind": "every",
    "everyMs": 3600000,
    "anchorMs": 1640000000000
  }
}
```
- 每 1 小时执行一次
- anchorMs 指定起始时间戳

**3. 复杂调度（cron）**
```json
{
  "schedule": {
    "kind": "cron",
    "expr": "0 9 * * 1-5",
    "tz": "Asia/Shanghai"
  }
}
```
- 工作日每天 9:00 执行
- tz 指定时区

#### 2.8.3 任务类型

**systemEvent**（系统事件）：
- 将文本注入到主会话中
- 用于提醒、通知等场景

```json
{
  "payload": {
    "kind": "systemEvent",
    "text": "提醒：下午 2 点有视频会议"
  }
}
```

**agentTurn**（Agent 会话）：
- 在独立会话中运行 Agent
- 用于长耗时、独立任务

```json
{
  "payload": {
    "kind": "agentTurn",
    "message": "帮我分析本周的用户反馈数据",
    "model": "gpt-4o",
    "timeoutSeconds": 300
  }
}
```

#### 2.8.4 使用场景示例

**场景 1：定时邮件检查**
```json
{
  "name": "每日邮件检查",
  "schedule": {
    "kind": "cron",
    "expr": "0 9 * * *",
    "tz": "Asia/Shanghai"
  },
  "payload": {
    "kind": "systemEvent",
    "text": "请检查是否有紧急邮件"
  },
  "sessionTarget": "main"
}
```

**场景 2：数据报告生成**
```json
{
  "name": "每周数据报告",
  "schedule": {
    "kind": "cron",
    "expr": "0 18 * * 5",
    "tz": "Asia/Shanghai"
  },
  "payload": {
    "kind": "agentTurn",
    "message": "生成本周的数据分析报告",
    "model": "gpt-4o"
  },
  "sessionTarget": "isolated"
}
```

**场景 3：一次性提醒**
```json
{
  "name": "项目截止提醒",
  "schedule": {
    "kind": "at",
    "at": "2026-02-28T17:00:00+08:00"
  },
  "payload": {
    "kind": "systemEvent",
    "text": "提醒：项目将在 3 天后截止"
  },
  "sessionTarget": "main"
}
```

---

### 2.9 子 Agent 机制

**功能描述**：支持创建异步子 Agent 会话，用于处理复杂任务拆分、长耗时任务、并行任务等场景。

#### 2.9.1 spawn 工具

**功能**：
- 创建独立的子 Agent 会话
- 在后台运行，不阻塞主会话
- 完成后自动通知父会话

**配置选项**：
- **agentId**：指定 Agent ID
- **label**：为子会话打标签
- **model**：自定义模型
- **thinking**：思考级别
- **runTimeoutSeconds**：运行超时时间
- **cleanup**：会话结束后清理策略（delete/keep）

#### 2.9.2 使用场景

**场景 1：复杂任务拆分**

```
用户："帮我分析 10 个视频的用户反馈"

主 Agent:
1. 创建 10 个子 Agent（每个分析 1 个视频）
2. 并行执行，等待所有完成
3. 汇总结果，生成报告
```

**场景 2：长耗时任务**

```
用户："帮我监控这只股票，每小时提醒我"

主 Agent:
1. 创建子 Agent
2. 子 Agent 持续监控
3. 达到阈值时通知主 Agent
4. 主 Agent 提醒用户
```

**场景 3：独立思考过程**

```
用户："帮我做一个深度调研"

主 Agent:
1. 创建子 Agent 进行独立调研
2. 子 Agent 可以访问自己的记忆和工具
3. 主 Agent 获取调研结果
```

#### 2.9.3 子 Agent 生命周期

```
创建 → 执行 → 完成 → 通知 → 清理
  ↓
  可选：超时控制、异常处理
```

**代码示例**（伪代码）：

```
# 主 Agent
sub_agents = []
for video in videos:
    sub_agent = spawn(
        task=f"分析视频 {video} 的用户反馈",
        label="video-analysis",
        timeoutSeconds=300
    )
    sub_agents.append(sub_agent)

# 等待所有子 Agent 完成
results = []
for agent in sub_agents:
    result = agent.wait()
    results.append(result)

# 汇总结果
summary = generate_summary(results)
```

#### 2.9.4 通知机制

**自动通知**：
- 子 Agent 完成后，自动将结果发送到父会话
- 支持消息格式化

**手动通知**：
- 子 Agent 可以在执行过程中主动通知父会话

**异常通知**：
- 子 Agent 异常时，自动通知父会话
- 包含错误信息和堆栈跟踪

---

## 3. 用户体验流程

### 3.1 首次使用流程

```
1. 下载并安装软件
   ↓
2. 打开应用
   ↓
3. 引导设置（老板入职）
   - 行业选择
   - 几句话描述
   - 工作风格偏好
   ↓
4. 系统推荐团队
   - 展示推荐的 Agent 列表
   - 用户确认
   ↓
5. 新手引导
   - 系统引导用户运行简单任务
   - 用户确认
   ↓
6. 执行简单任务
   - 生成 1 个分镜（文案+图片）
   - 配音合成
   - 视频生成
   ↓
7. 查看结果
   - 用户查看任务结果
   - 完成引导
   ↓
8. 进入主界面
   - 用户开始正常使用
```

### 3.2 创建 Agent 流程

```
1. 点击"创建 Agent"
   ↓
2. 填写职位信息表单
   - 职位名称
   - 工作内容描述
   - 技能要求
   - 工作风格
   - 输出要求
   ↓
3. 系统自动生成 Agent 配置
   - AI 生成规则（联网搜索）
   - 推荐技能列表
   - 生成其他配置
   ↓
4. 用户预览生成的配置
   - 查看规则（SOUL.md、RULES.md）
   - 查看技能列表（SKILLS.md）
   - 查看其他配置
   ↓
5. 用户手动调整（可选）
   - 调整规则
   - 筛选技能
   - 修改其他内容
   ↓
6. 保存 Agent
```

### 3.3 创建工作流流程

```
1. 点击"创建 Flow"
   ↓
2. 输入自然语言描述工作流
   ↓
3. 系统解析并生成 Flow
   - 识别 Agent
   - 识别任务
   - 识别任务依赖
   ↓
4. 用户预览 Flow 结构
   - 查看 Agent 列表
   - 查看任务列表
   - 查看依赖关系
   ↓
5. 用户手动调整（可选）
   - 调整任务顺序
   - 修改任务依赖
   - 添加/删除任务
   ↓
6. 保存 Flow
```

### 3.4 执行工作流流程

```
1. 选择要执行的 Flow
   ↓
2. 输入任务参数（如有）
   ↓
3. 开始执行
   ↓
4. 系统按照依赖关系依次执行任务
   - 实时显示执行进度
   - 显示日志和输出
   ↓
5. 所有任务完成后
   - 生成执行报告
   - 展示最终结果
   ↓
6. 用户查看并确认
```

---

## 4. 漫剧制作场景示例

### 4.1 Agent 团队配置

根据漫剧制作需求，推荐以下 Agent：

| Agent 名称 | 职位 | 核心技能 |
|-----------|------|---------|
| 星野 | 漫剧脚本师 | 故事创意生成、剧情大纲生成、角色设定生成、分镜脚本生成 |
| 月影 | 漫剧分镜师 | 分镜脚本生成、分镜参考图生成 |
| 云雀 | 漫剧配音师 | 角色配音合成 |
| 风华 | 漫剧视频师 | 视频合成、视频后期处理、成片导出 |
| 流影 | 漫剧音效师 | 背景音乐推荐、音效匹配 |

### 4.2 工作流定义

**工作流描述**：
```
项目管理能统筹全局，然后是根据文字内容进行分镜，
再进行分镜视频合成，最后进行配音和背景音乐合成
```

**系统解析后的 Flow**：

```json
{
  "flow_id": "uuid",
  "name": "漫剧制作流程",
  "agents": [
    {
      "agent_id": "project_manager",
      "agent_name": "流影（项目经理）",
      "tasks": [
        {
          "task_id": "coordinate",
          "name": "统筹全局",
          "skills": ["项目管理"]
        }
      ]
    },
    {
      "agent_id": "storyboard_artist",
      "agent_name": "月影（分镜师）",
      "tasks": [
        {
          "task_id": "create_storyboard",
          "name": "根据文字内容进行分镜",
          "input": "文字内容",
          "output": "分镜脚本",
          "skills": ["分镜脚本生成", "分镜参考图生成"]
        }
      ]
    },
    {
      "agent_id": "video_editor",
      "agent_name": "风华（视频师）",
      "tasks": [
        {
          "task_id": "synthesize_video",
          "name": "分镜视频合成",
          "input": "分镜脚本 + 分镜参考图",
          "output": "视频素材",
          "skills": ["视频合成"]
        }
      ]
    },
    {
      "agent_id": "voice_actor",
      "agent_name": "云雀（配音师）",
      "tasks": [
        {
          "task_id": "create_voiceover",
          "name": "配音合成",
          "input": "分镜脚本",
          "output": "角色配音",
          "skills": ["角色配音合成"]
        }
      ]
    },
    {
      "agent_id": "audio_engineer",
      "agent_name": "流影（音效师）",
      "tasks": [
        {
          "task_id": "create_bgm",
          "name": "背景音乐合成",
          "input": "视频素材",
          "output": "成片",
          "skills": ["背景音乐推荐", "音效匹配", "成片导出"]
        }
      ]
    }
  ],
  "connections": [
    {"from": "coordinate", "to": "create_storyboard"},
    {"from": "create_storyboard", "to": "synthesize_video"},
    {"from": "create_storyboard", "to": "create_voiceover"},
    {"from": "synthesize_video", "to": "create_bgm"},
    {"from": "create_voiceover", "to": "create_bgm"}
  ]
}
```

### 4.3 执行示例

**用户输入**：
```
制作一集漫剧，主题是"勇者的冒险"，主角叫小明，
需要包含 3 个场景：森林、城堡、魔王城
```

**执行过程**：

1. **项目经理**：统筹规划
   - 确定目标：制作 3 个场景的漫剧
   - 协调资源：分镜师、视频师、配音师、音效师

2. **分镜师（月影）**：
   - 生成分镜脚本（3 个场景）
   - 生成分镜参考图（森林、城堡、魔王城）

3. **视频师（风华）**：
   - 根据分镜脚本和参考图合成视频

4. **配音师（云雀）**：
   - 根据分镜脚本生成角色配音

5. **音效师（流影）**：
   - 推荐背景音乐
   - 匹配音效
   - 整合成片

**最终输出**：
- 完整的漫剧视频
- 分镜脚本文档
- 配音文件
- 背景音乐列表

---

## 5. 技术要求

### 5.1 技术栈

**前端**：
- 框架：Tauri + Vue 3
- 语言：TypeScript
- UI 组件库：Element Plus

**后端**：
- 框架：Python + FastAPI
- 数据库：SQLite + Redis
- Agent 引擎：参考 OpenClaw 架构

**打包**：
- Windows：NSIS
- 安装包体积：< 50MB

### 5.2 核心技术能力

**AI 能力**：
- LLM 对话（支持多个 Provider）
- 自然语言解析（Flow 解析、技能生成）
- 联网搜索（Agent 规则生成）

**工具调用**：
- 文件操作（read、write、edit）
- 命令执行（exec - 后台、PTY 模式）
- Web 搜索（Brave Search API）
- Web 内容抓取（web_fetch）
- 图片生成 API
- TTS API
- 视频合成 API
- 音乐库 API
- 音效库 API
- 浏览器控制（browser）

**存储**：
- Agent 配置文件（SOUL.md、IDENTITY.md、RULES.md、MEMORY.md、SKILLS.md）
- 用户配置
- 工作流配置
- 执行日志

**任务调度**：
- 定时任务（HEARTBEAT.md）
- Cron 表达式（at、every、cron）
- 子 Agent 管理（spawn）

---

## 6. MVP 范围

### 6.1 必须包含的功能

✅ 用户首次设置（老板入职）
✅ Agent 模拟招聘系统（7 项配置自动生成）
✅ 规则生成（AI + 联网搜索）
✅ 技能推荐（60-70% 准确率）
✅ 官方技能（12 个漫剧制作技能）
✅ 外部工具配置（开箱即用 + 可自定义）
✅ Flow 工作流编排（自然语言解析）
✅ 新手引导（简单任务演示）
✅ 多 Provider/Model 管理
✅ 工具调用完整系统（文件、命令、搜索）
✅ 定时任务系统（HEARTBEAT、cron）
✅ 子 Agent 机制（spawn）

### 6.2 暂不考虑的功能

❌ 付费模式（MVP 版本）
❌ Agent/Flow 官方交易市场
❌ 用户自定义技能（MVP 专注官方技能）
❌ 更多 LLM 后端（OpenRouter、Gemini、DeepSeek、Groq）
❌ 多消息通道（Telegram、Discord、QQ、钉钉、LINE、飞书）

### 6.3 架构设计预留余地

**预留空间**：
- 账号系统（后期支持多设备同步）
- 技能扩展（后期支持用户自定义技能）
- Flow 市场（后期支持 Flow 模板分享）
- 性能优化（多 Agent 并发执行）
- 更多 LLM 后端（下一期）
- 多消息通道（下一期）

---

## 7. 非功能性需求

### 7.1 易用性

- 一键安装（Windows 安装程序）
- 零技术门槛（不需要了解 CLI、配置文件）
- 开箱即用（默认配置可用）
- 清晰的新手引导

### 7.2 性能

- 启动时间 < 5 秒
- 安装包体积 < 50MB
- 简单任务执行时间 < 2 分钟

### 7.3 可靠性

- Agent 配置生成成功率 > 90%
- Flow 解析准确率 > 80%
- 工作流执行成功率 > 95%
- 工具调用成功率 > 98%

### 7.4 安全性

- 用户数据加密存储
- API Key 加密存储
- Provider 配置信息封装（用户不可见）
- 参考 OpenClaw SOUL.md 的安全机制
- 危险命令屏蔽
- 敏感操作确认

### 7.5 可维护性

- 模块化设计
- 完整的日志系统
- 详细的文档
- 代码注释完整

---

## 8. 成功指标

### 8.1 MVP 成功标准

- [ ] 可以一键安装（Windows 安装程序）
- [ ] 用户首次设置流程完整（老板入职）
- [ ] 可以创建 Agent（至少 5 个职位模板）
- [ ] 可以创建 Flow（至少 1 个漫剧制作流程）
- [ ] 可以执行完整的漫剧制作流程
- [ ] 工具调用系统完整（文件、命令、搜索）
- [ ] 定时任务系统可用（HEARTBEAT、cron）
- [ ] 子 Agent 机制可用（spawn）
- [ ] 安装包体积 < 50MB
- [ ] 启动时间 < 5 秒
- [ ] 新手引导流畅（简单任务执行成功）

### 8.2 用户体验目标

- 用户能在 10 分钟内完成首次设置
- 用户能在 15 分钟内创建第一个 Agent
- 用户能在 10 分钟内创建第一个 Flow
- 用户能在 5 分钟内看到新手引导任务的执行结果

### 8.3 技术指标

- 系统稳定性：正常运行时间 > 99%
- 响应时间：API 响应时间 < 2 秒
- 并发能力：支持 10+ 子 Agent 并发执行

---

## 9. 待确认事项

1. **产品名称**：需要确认正式的产品名称
2. **技术栈**：Tauri + Vue 3 + Python 是否确认？
3. **开发资源**：是否有开发团队协助？
4. **时间线**：3 个月 MVP 是否合理？
5. **官方技能扩展**：除了漫剧制作，是否需要优先支持其他场景？

---

## 10. 附录

### 10.1 术语表

| 术语 | 定义 |
|-----|------|
| Agent | AI 员工，具有独立身份、技能和行为的智能体 |
| Flow | 工作流，定义多个 Agent 如何协作完成任务 |
| Skill | 技能，Agent 可以执行的具体功能模块 |
| Provider | LLM 服务提供商（如 OpenAI、Claude、智谱） |
| Model | 具体的语言模型（如 gpt-4o、claude-3-5-sonnet） |
| HEARTBEAT.md | 定时任务配置文件 |
| spawn | 创建子 Agent 会话的工具 |
| PTY | 伪终端，用于交互式命令 |

### 10.2 参考文档

- [产品规划文档](./AI_Work_Platform_MVP.md)
- [技术实现规范](./AI_Work_Platform_Tech_Spec.md)
- [快速启动指南](./AI_Work_Platform_QuickStart.md)
- [OpenClaw 文档](https://docs.openclaw.ai)

### 10.3 配置文件说明

**AGENT 配置文件结构**：
```
agents/
├── {agent_id}/
│   ├── SOUL.md              # 灵魂（性格、价值观、行为准则）
│   ├── IDENTITY.md          # 身份信息（姓名、职位、简介）
│   ├── RULES.md             # 行为准则（工作边界、安全规则）
│   ├── MEMORY.md            # 长期记忆（初始为空）
│   ├── SKILLS.md            # 关联的技能列表
│   ├── CONFIG.json          # 配置（默认模型、工具权限等）
│   ├── HEARTBEAT.md         # 定时任务描述（可选）
│   ├── tools/               # Agent 专用工具（可选）
│   └── memory/              # 记忆存储
│       ├── 2026-02-15.md    # 每日记忆
│       └── ...
```

**USER 配置文件**：
```
user/
├── USER.md                  # 用户偏好
├── MEMORY.md                # 用户长期记忆（仅主会话）
├── HEARTBEAT.md             # 定时任务清单
```

### 10.4 核心命令速查

**文件操作**：
```bash
read /path/to/file.md
write /path/to/file.md "content"
edit /path/to/file.md "oldText" "newText"
```

**命令执行**：
```bash
exec "python3 script.py"
exec "ls -la" --background
exec "interactive_command" --pty
```

**Web 操作**：
```bash
web_search "AI industry news"
web_fetch https://example.com
```

**子 Agent**：
```bash
spawn "分析数据" --label "data-analysis"
```

**定时任务**：
```bash
cron add --name "daily-check" --schedule '{"kind":"cron","expr":"0 9 * * *"}' --payload '{"kind":"systemEvent","text":"检查邮件"}'
```

---

## 11. 版本历史

| 版本 | 日期 | 变更内容 |
|-----|------|---------|
| v1.0 | 2026-02-15 | 初始版本，包含所有核心功能 |

---

**文档创建时间**：2026-02-15
**版本**：v1.0
**状态**：待评审
